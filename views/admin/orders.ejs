<!-- views/admin/orders.ejs -->
<h2>All Orders (Admin)</h2>

<% if (orders && orders.length > 0) { %>
    <% orders.forEach(order => { %>
        <div style="border:1px solid #ccc; padding:10px; margin:10px;">
            <p><strong>User:</strong> <%= order.userId.name %> (<%= order.userId.email %>)</p>
            <p><strong>Status:</strong> <%= order.status %></p>
            <p><strong>Total:</strong> $<%= order.totalPrice %></p>
            <p><strong>Date:</strong> <%= order.createdAt.toDateString() %></p>

            <ul>
                <% order.items.forEach(i => { %>
                    <li><%= i.productId.name %> - Qty: <%= i.quantity %></li>
                <% }) %>
            </ul>

            <!-- Optional: Add button to update status -->
            <form action="/admin/orders/<%= order._id %>/status" method="POST">
                <select name="status">
                    <option value="Pending" <%= order.status === "Pending" ? "selected" : "" %>>Pending</option>
                    <option value="Shipped" <%= order.status === "Shipped" ? "selected" : "" %>>Shipped</option>
                    <option value="Delivered" <%= order.status === "Delivered" ? "selected" : "" %>>Delivered</option>
                </select>
                <button type="submit">Update</button>
            </form>
        </div>
    <% }) %>
<% } else { %>
    <p>No orders found</p>
<% } %>
